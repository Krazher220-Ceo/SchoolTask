# üõí –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–∏—Å—Ç–µ–º—ã –º–∞–≥–∞–∑–∏–Ω–∞ –∏ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏

## –®–∞–≥–∏ –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
npx prisma migrate dev --name add_shop_and_gamification
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `ShopItem` - —Ç–æ–≤–∞—Ä—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ
- `UserPurchase` - –ø–æ–∫—É–ø–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `UserVisualEffects` - –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `LoginStreak` - —Å—Ç—Ä–∏–∫–∏ –≤—Ö–æ–¥–∞
- `MinistryWar` - –±–∏—Ç–≤–∞ –º–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤
- `Spotlight` - –∑–∞–∫—Ä–µ–ø –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

### 2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏

```bash
npx tsx prisma/seed-shop.ts
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã:
- –¶–≤–µ—Ç–∞ –Ω–∏–∫–Ω–µ–π–º–∞ (–∫—Ä–∞—Å–Ω—ã–π, —Å–∏–Ω–∏–π, –∑–µ–ª–µ–Ω—ã–π, –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã)
- –†–∞–º–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞ (–ø—É–ª—å—Å–∏—Ä—É—é—â–∞—è, –∫–æ—Ä–æ–ª–µ–≤—Å–∫–∞—è, –≥–ª–∏—Ç—á)
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç–∏—Ç—É–ª—ã
- –ó–∞–∫—Ä–µ–ø –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ó–∞–º–æ—Ä–æ–∑–∫–∞ —Å—Ç—Ä–∏–∫–∞

### 3. –û–±–Ω–æ–≤–∏—Ç—å API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∏—Ç–≤—ã –º–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤

–ü—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ EP –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–∏—Ç–≤—ã –º–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤. –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–¥ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è EP (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `app/api/ep/route.ts`):

```typescript
// –ü–æ—Å–ª–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è EP
if (user.parliamentMember?.ministry) {
  await fetch('/api/ministry-war', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      ministry: user.parliamentMember.ministry,
      epAmount: amount,
    }),
  })
}
```

### 4. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–∏–∫–æ–≤ –Ω–∞ –¥–∞—à–±–æ—Ä–¥

–í `app/sch1/dashboard/page.tsx` –¥–æ–±–∞–≤—å—Ç–µ:

```tsx
import StreakDisplay from '@/app/components/StreakDisplay'

// –í JSX –¥–æ–±–∞–≤–∏—Ç—å:
<StreakDisplay />
```

## –ù–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –°—Ç—Ä–∞–Ω–∏—Ü—ã:
- `/sch1/shop` - –ú–∞–≥–∞–∑–∏–Ω –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

### API Endpoints:
- `GET /api/shop/items` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `POST /api/shop/purchase` - –ö—É–ø–∏—Ç—å —Ç–æ–≤–∞—Ä
- `GET /api/streak` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/streak` - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∏–∫
- `POST /api/streak/freeze` - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–º–æ—Ä–æ–∑–∫—É —Å—Ç—Ä–∏–∫–∞
- `GET /api/ministry-war` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–∏—Ç–≤—ã –º–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤
- `POST /api/ministry-war` - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- `GET /api/spotlight` - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π Spotlight

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `StreakDisplay` - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∏–∫–∞ –≤—Ö–æ–¥–∞
- `MinistryWar` - –ë–∏—Ç–≤–∞ –º–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤
- `Spotlight` - –ì–µ—Ä–æ–π –¥–Ω—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—Ç–∏–ª–∏—Ç—ã –∏–∑ `lib/userDisplay.tsx`:

```tsx
import { UserNameDisplay, AvatarDisplay } from '@/lib/userDisplay'

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
<UserNameDisplay 
  name={user.name} 
  visualEffects={user.visualEffects}
  className="font-bold"
/>

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ —Å —Ä–∞–º–∫–æ–π
<AvatarDisplay
  avatar={user.avatar}
  name={user.name}
  visualEffects={user.visualEffects}
  size="md"
/>
```

## –°–∏—Å—Ç–µ–º–∞ –ª–∏–≥ –≤ —Ä–µ–π—Ç–∏–Ω–≥–∞—Ö

–†–µ–π—Ç–∏–Ω–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –ª–∏–≥–∏:
- **–ë—Ä–æ–Ω–∑–æ–≤–∞—è –ª–∏–≥–∞**: 0-1000 EP
- **–°–µ—Ä–µ–±—Ä—è–Ω–∞—è –ª–∏–≥–∞**: 1000-5000 EP
- **–ó–æ–ª–æ—Ç–∞—è –ª–∏–≥–∞**: 5000+ EP

–¢–æ–ø-3 –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –ø—å–µ–¥–µ—Å—Ç–∞–ª–µ –ø–æ—á–µ—Ç–∞ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏.

